import { forkJoin, of } from 'rxjs';
import { catchError, map } from 'rxjs/operators';
import merge from 'deepmerge';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var MultiTranslateHttpLoader = /** @class */ (function () {
    /**
     * @param {?} http
     * @param {?} resources
     */
    function MultiTranslateHttpLoader(http, resources) {
        this.http = http;
        this.resources = resources;
    }
    /**
     * @param {?} lang
     * @return {?}
     */
    MultiTranslateHttpLoader.prototype.getTranslation = function (lang) {
        var _this = this;
        var /** @type {?} */ requests = this.resources.map(function (resource) {
            var /** @type {?} */ path = resource.prefix + lang + resource.suffix;
            return _this.http.get(path).pipe(catchError(function (res) {
                console.error("Could not find translation file:", path);
                return of({});
            }));
        });
        return forkJoin(requests).pipe(map(function (response) { return merge.all(response); }));
    };
    return MultiTranslateHttpLoader;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { MultiTranslateHttpLoader };
//# sourceMappingURL=ngx-translate-multi-http-loader.js.map
